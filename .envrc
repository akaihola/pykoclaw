# Development environment for foam-web
# Cross-platform .envrc for uv projects
#
# Note: On Git Bash/MINGW, direnv has a known bug that mangles PATH.
# Use `uv run <command>` instead of activating the venv, or use WSL.

# Sync dependencies
uv sync

# Set VIRTUAL_ENV (works everywhere)
export VIRTUAL_ENV="$PWD/.venv"

# Only modify PATH on Unix systems (Linux/macOS/WSL) where direnv works correctly
# On Windows Git Bash: use the _unmangle_direnv_paths hook in ~/.bashrc
# See: https://github.com/direnv/direnv/issues/253#issuecomment-1876944049
if [ -d ".venv/Scripts" ]; then
  # Windows
  PATH_add .venv/Scripts
elif [ -d ".venv/bin" ]; then
  # Unix
  PATH_add .venv/bin
fi
